# Feature Implementation Task: Add Platform and Version Filtering to fake-useragent

## Problem / Background

This task is based on a real feature request from the fake-useragent project (Issue #84). Users want the ability to get user agents for specific device platforms (mobile, PC, tablet) and filter by minimum browser version.

Currently, the `FakeUserAgent` class supports filtering by:
- Browser name (chrome, firefox, edge, safari)
- Operating system (windows, macos, linux)
- Minimum usage percentage

However, it does NOT support:
- Filtering by platform type (pc, mobile, tablet)
- Filtering by minimum browser version

Users need to be able to call:
```python
ua = UserAgent(platforms=["mobile"])  # Get only mobile user agents
ua = UserAgent(platforms="pc")        # Get only desktop user agents
ua = UserAgent(min_version=120.0)     # Get only browsers version 120+
```

## Repository Structure

```
feature_case/
├── pyproject.toml
├── src/
│   └── fake_useragent/
│       ├── __init__.py
│       ├── errors.py
│       ├── fake.py          # Main file to modify
│       ├── log.py
│       ├── settings.py
│       ├── utils.py
│       └── data/
│           └── browsers.json # Contains user agent data with "type" field
└── tests/
    └── test_platforms.py    # Tests for the new feature (currently failing)
```

**Note**: The `browsers.json` file already contains a `"type"` field for each user agent entry with values: `"pc"`, `"mobile"`, or `"tablet"`. You just need to implement the filtering logic.

## Scope & Constraints

### Allowed:
- Add new parameters (`platforms`, `min_version`) to `FakeUserAgent.__init__()`
- Add filtering logic based on these new parameters
- Refactor the filtering code to avoid duplication (optional but recommended)

### Prohibited:
- Changing existing parameter behaviors (browsers, os, min_percentage, etc.)
- Modifying the data file format
- Adding unrelated features or optimizations

## Tasks

1. **Add `platforms` parameter** to `FakeUserAgent.__init__()`:
   - Accept list or string of platform types
   - Default value: `["pc", "mobile", "tablet"]`
   - Add input validation (assert it's list or string)

2. **Add `min_version` parameter** to `FakeUserAgent.__init__()`:
   - Accept float or int for minimum version
   - Default value: `0.0`
   - Add input validation

3. **Update filtering logic** in both `getBrowser()` and `__getattr__()`:
   - Filter by `x["type"] in self.platforms`
   - Filter by `x["version"] >= self.min_version`

4. **Run tests and iterate until all pass**:
   ```bash
   pip install -e .
   pip install pytest
   pytest tests/test_platforms.py -v
   ```
   - If tests fail, diagnose the issue, fix the implementation, and re-run tests
   - Maximum 5 retry iterations
   - All 13 tests in test_platforms.py must pass

## Testing Requirements

The test file `tests/test_platforms.py` contains tests that:
- Currently FAIL on the baseline (because the feature is not implemented)
- Must ALL PASS after your implementation (13 tests total)

Key tests:
- `test_platforms_parameter_exists`: Verifies `platforms` param is accepted
- `test_platforms_filter_mobile_only`: Verifies mobile-only filtering works
- `test_min_version_parameter_exists`: Verifies `min_version` param is accepted
- `test_min_version_filter`: Verifies version filtering works

## Environment & Deliverables

- **Environment**: Windows 10+ / Python 3.10+
- **Working Directory**: feature_case/
- **Deliverables**:
  - Modified `src/fake_useragent/fake.py` with the new feature
  - All 13 tests in `test_platforms.py` passing (verified by running pytest in terminal)

## Critical Requirements

- Directly modify the files and run tests - do not output diffs or patches
- Ensure the package is installed in editable mode before running tests
- Run pytest in terminal with verbose output to verify all tests pass
- If any tests fail after implementation, analyze the failure, fix the code, and re-run until all 13 tests pass
- The final pytest output must show "13 passed" with exit code 0
